<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>设备信息管理页面</title>
<meta
	content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'
	name='viewport'>
<!-- css-page-preload-animations -->
<link href="${contextPath}/assets/thirdParty/pagePreloadAnimations/css/Icomoon/style.css"
	rel="stylesheet" type="text/css" />
<link href="${contextPath}/assets/thirdParty/pagePreloadAnimations/css/main.css"
	rel="stylesheet" type="text/css" />
<!-- css-page-preload-animations -->
<!-- Theme style -->
<link href="${contextPath}/assets/css/AdminLTE/AdminLTE.css"
	rel="stylesheet" type="text/css" />
<link href="${contextPath}/assets/css/AdminLTE/skins/skin-blue.min.css"
	rel="stylesheet" type="text/css" />
<!-- Bootstrap 3.3.4 -->
<link
	href="${contextPath}/assets/thirdParty/bootstrap/bootstrap-3.3.5/css/bootstrap.min.css"
	rel="stylesheet" type="text/css" />
<!-- DATA TABLES -->
<!--  <link href="${contextPath}/assets/thirdParty/dataTables/css/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />-->
<link href="${contextPath}/assets/thirdParty/dataTables/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
<!-- model -->
<!--  <link
	href="${contextPath}/assets/thirdParty/bootstrap/extend/modal/css/bootstrap-responsive.min.css"
	rel="stylesheet" type="text/css" />-->
<link
	href="${contextPath}/assets/thirdParty/bootstrap/extend/modal/css/bootstrap-modal.css"
	rel="stylesheet" type="text/css" />
<!-- Font Awesome Icons -->
<link href="${contextPath}/assets/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />
<!-- Ionicons -->
<link href="${contextPath}/assets/css/ionicons.min.css" rel="stylesheet"
	type="text/css" />



<!--  <link href="style.css" rel="stylesheet" type="text/css" />-->
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="${contextPath}/assets/thirdParty/js/html5shiv.min.js"></script>
        <script src="${contextPath}/assets/thirdParty/js/respond.min.js"></script>
    <![endif]-->
<style>
#loading{
	background-color: #367FA9;
	height: 100%;
	width: 100%;
	position: fixed;
	z-index: 2030;
	margin-top: 0px;
	top: 0px;
}

#loading-center{
	width: 100%;
	height: 100%;
	position: relative;
}

#loading-center-absolute {
	position: absolute;
	left: 50%;
	top: 50%;
	height: 200px;
	width: 200px;
	margin-top: -100px;
	margin-left: -100px;
	-ms-transform: rotate(-135deg); 
   	-webkit-transform: rotate(-135deg); 
    transform: rotate(-135deg);
}

.object{
	-moz-border-radius: 50% 50% 50% 50%;
	-webkit-border-radius: 50% 50% 50% 50%;
	border-radius: 50% 50% 50% 50%;
	position: absolute;
	border-top: 5px solid #FFF;
	border-bottom: 5px solid transparent;
	border-left:  5px solid #FFF;
	border-right: 5px solid transparent;
	-webkit-animation: animate 2s infinite;
	animation: animate 2s infinite;	
}

#object_one{
	left: 75px;
	top: 75px;
	width: 50px;
	height: 50px;
}
							
#object_two{
	left: 65px;
	top: 65px;
	width: 70px;
	height: 70px;
	-webkit-animation-delay: 0.2s;
    animation-delay: 0.2s;
}
		
#object_three{
	left: 55px;
	top: 55px;
	width: 90px;
	height: 90px;
	-webkit-animation-delay: 0.4s;
    animation-delay: 0.4s;
}

#object_four{
	left: 45px;
	top: 45px;
	width: 110px;
	height: 110px;
	-webkit-animation-delay: 0.6s;
    animation-delay: 0.6s;
}	

@-webkit-keyframes animate {
50% {

	-ms-transform: rotate(360deg) scale(0.8); 
   	-webkit-transform: rotate(360deg) scale(0.8); 
    transform: rotate(360deg) scale(0.8); 
  }
}

@keyframes animate {
50% {

	-ms-transform: rotate(360deg) scale(0.8); 
   	-webkit-transform: rotate(360deg) scale(0.8); 
    transform: rotate(360deg) scale(0.8); 
  }	
}
a{
text-decoration:none;
}
a:link{
text-decoration:none;
}
a:visited{
text-decoration:none;
}
a:hover{
text-decoration:none;
}
a:active{
text-decoration:none;
}
.selected {
  background-color: #a9b7d1;
}
</style>
</head>
<body class="skin-blue fixed" data-spy="scroll" data-target="#scrollspy"> 

	<div id="loading">

<div id="loading-center">
<div id="loading-center-absolute">
<div class="object" id="object_four"></div>
<div class="object" id="object_three"></div>
<div class="object" id="object_two"></div>
<div class="object" id="object_one"></div>
</div>
</div>

</div>
	<!--  -->
	<div class="wrapper">
		<!-- page header start -->
		<header class="main-header">
			<!-- Logo -->
			<!-- Logo -->
			<a href="#" class="logo"> <!-- mini logo for sidebar mini 50x50 pixels -->
				<span class="logo-mini"><b><@howard.m "page.main.logo"/></b></span> <!-- logo for regular state and mobile devices -->
				<span class="logo-lg"><b><@howard.m "page.main.logo"/></b></span>
			</a>
			<!-- Header Navbar: style can be found in header.less -->
			<nav class="navbar navbar-static-top" role="navigation">
				<!-- Sidebar toggle button-->
				<a href="#" class="sidebar-toggle" data-toggle="offcanvas"
					role="button"> <span class="sr-only"></span>
				</a>
				<!-- Navbar Right Menu -->
				<div class="navbar-custom-menu">
					<ul class="nav navbar-nav">
						<li><a href="${contextPath}/analysisadmin/analysis/logout.html">注销</a></li>
					</ul>
				</div>
			</nav>
		</header>
		<!-- page header end -->
		<!-- Left side column. contains the logo and sidebar -->
		<aside class="main-sidebar">
			<!-- sidebar: style can be found in sidebar.less -->
			<div class="sidebar" id="scrollspy">
				<!-- sidebar menu: : style can be found in sidebar.less -->
				<ul class="nav sidebar-menu">
					<li class="header"></li>
					<!-- menu items start -->
					<li class="active"><a href="${contextPath}/analysisadmin/analysis/index.html"><i class="fa fa-th"></i>
							<span>首页</span><small class="label pull-right bg-green">new</small>
					</a>
					</li>
					<li class="treeview"><a href="#"><i class="fa fa-files-o"></i>
							<span>场站管理</span><span
							class="label label-primary pull-right">2</span> </a>
						<ul class="treeview-menu">
							<li><a href="#"><i class="fa fa-circle-o"></i>场站信息管理</a></li>
							<li><a href="#"><i class="fa fa-circle-o"></i>场站设备绑定</a></li>
						</ul></li>
					<li class="treeview"><a href="#"><i class="fa fa-files-o"></i>
							<span>设备管理</span><span
							class="label label-primary pull-right">2</span> </a>
						<ul class="treeview-menu">
							<li><a href="#" class="gotoPageUrlBefore" goto_page_url="${contextPath}/analysisadmin/analysis/stationEquipment/stationEquipment.html"><i
									class="fa fa-circle-o"></i>设备基础信息维护</a></li>
							<li><a href="#" class="gotoPageUrlBefore" goto_page_url="${contextPath}/analysisadmin/analysis/stationEquipment/stationEquipment.html"><i
									class="fa fa-circle-o"></i>设备车辆绑定</a></li>
						</ul>
					</li>
					<li class="treeview">
					   <a href="#"><i class="fa fa-files-o"></i>
							<span>车辆管理</span><span
							class="label label-primary pull-right">1</span> </a>
						<ul class="treeview-menu">
							<li><a href="${contextPath}/analysisadmin/analysis/car/carInfoShow.html">
							  <i class="fa fa-circle-o"></i>车辆基础信息维护</a></li>
						</ul>
					</li>
					<li class="treeview">
					   <a href="#"><i class="fa fa-files-o"></i>
							<span>车辆定位</span><span
							class="label label-primary pull-right">1</span> </a>
						<ul class="treeview-menu">
							<li><a href="#" class="gotoPageUrlBefore" goto_page_url="${contextPath}/analysisadmin/analysis/stationEquipment/stationEquipment.html">
							  <i class="fa fa-circle-o"></i>车辆实时定位</a></li>
						</ul>
					</li>
					<li class="treeview">
					   <a href="#"><i class="fa fa-files-o"></i>
							<span>车辆行程</span><span
							class="label label-primary pull-right">1</span> </a>
						<ul class="treeview-menu">
							<li><a href="#" class="gotoPageUrlBefore" goto_page_url="${contextPath}/analysisadmin/analysis/travelShow/travelCarSelectShow.html">
							  <i class="fa fa-circle-o"></i>车辆行程监控</a></li>
						</ul>
					</li>
					<li>
						<a href="#">
						   <i class="fa fa-th"></i>
						   <span>车辆状态监控</span>
						   <small class="label pull-right bg-green">new</small>
						</a>
					</li>
					<!-- menu items end -->
				</ul>
			</div>
			
			<!-- /.sidebar -->
		</aside>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<h1>
					设备编号:100003 车牌号:川A97568
				</h1>
				<ol class="breadcrumb">
					<li><a href="${contextPath}/analysisadmin/analysis/index.html"><i class="fa fa-dashboard"></i> 首页</a></li>
					<li class="active">设备监控</li>
				</ol>
			</div>
			<div class="pad no-print">
				<div class="callout callout-info"
					style="margin-bottom: 0 !important;">
					<h4>
						操作说明:
					</h4>
					选择具体的日期后选择某个出场到回场过程,在表格中就会显示该段过程中的所有子流程,通过点击来展示运动路线和过程中重量变化的折线图
				</div>
			</div>
			<!--  -->
	
<div class="modal fade" id="infoModal" tabindex="-1" role="dialog" 
   aria-labelledby="myModalLabel" aria-hidden="true"></div>
<!--  -->
			<!-- Main content -->
			<div class="content body">
			    <div class="box">
			    <div class="box-body">	
			      
			    </div>
					<div class="box-body">	
					   <table id="equipmentInfo" class="table table-bordered table-striped" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>路程名称</th>
                <th>搅拌桶转动方向</th>
                <th>日期</th>
                <th>开始时间</th>
                <th>结束时间</th>
            </tr>
        </thead>
        <tbody>
            
        </tbody>
    </table>
					</div>
				</div>
				<!-- page main content start -->
				<!-- equipmentinfo table -->
				
			<!-- equipmentinfo table -->
			<!--  -->
			
			<!--  -->
			<!-- page main content stop -->
			</div>
			<!-- /.content -->
		</div>
		<div id="bssOrgClick" name="bssOrgClick" style="display:none;" >
			  
		</div>
		<!-- /.content-wrapper -->
		<footer class="main-footer">
			<@howard.m "page.main.footer"/>
		</footer>
	</div>
	<!-- ./wrapper -->

	<!-- jQuery 2.1.4 -->
	<script
		src="${contextPath}/assets/thirdParty/js/jquery/resources/jQuery-2.1.4.min.js"></script>
	<!-- Bootstrap 3.3.5 JS -->
	<script
		src="${contextPath}/assets/thirdParty/json/jquery.json.js"></script>
	<script
		src="${contextPath}/assets/thirdParty/bootstrap/bootstrap-3.3.5/js/bootstrap.min.js"
		type="text/javascript"></script>
	<!-- mode -->
	<script
		src="${contextPath}/assets/thirdParty/bootstrap/extend/modal/js/bootstrap-modalmanager.js"></script>
	<script
		src="${contextPath}/assets/thirdParty/bootstrap/extend/modal/js/bootstrap-modal.js"></script>
	<!-- dataTables -->
	<script type="text/javascript" src="${contextPath}/assets/thirdParty/dataTables/js/jquery.dataTables.js">
	</script>	
	<script type="text/javascript" src="${contextPath}/assets/thirdParty/dataTables/js/dataTables.bootstrap.min.js">
	</script>	
	<!-- FastClick -->
	<script
		src='${contextPath}/assets/thirdParty/js/jquery/plugins/fastclick/fastclick.min.js'></script>
	<!-- AdminLTE App -->
	<script src="${contextPath}/assets/thirdParty/js/app.js"
		type="text/javascript"></script>
	<!-- SlimScroll 1.3.0 -->
	<script
		src="${contextPath}/assets/thirdParty/js/jquery/plugins/slimScroll/jquery.slimscroll.min.js"
		type="text/javascript"></script>
		
	<script src="${contextPath}/assets/thirdParty/js/layer/layer.js"></script>
	<script type="text/javascript">
	
	var gotoPageUrl;
	var stationLocation;
	var layerOfBssOrgSelect;
$(document).ready(function() {
	bindingEvent();
	$("#loading").delay(2000).fadeOut(500);
	$('#equipmentInfo').DataTable( {
		
		"oLanguage": {                          //汉化   
            "sLengthMenu": "每页显示 _MENU_ 条记录",   
            "sZeroRecords": "没有检索到数据",   
            "sInfo": "当前数据为从第 _START_ 到第 _END_ 条数据；总共有 _TOTAL_ 条记录",   
            "sInfoEmtpy": "没有数据",   
            "sProcessing": "正在加载数据...",   
            "oPaginate": {   
                "sFirst": "首页",   
                "sPrevious": "前页",   
                "sNext": "后页",   
                "sLast": "尾页"  
            }   
        }
	} );
	bindingEvents();
  
});
//绑定页面中所有元素的事件
function bindingEvents(){
    //绑定表格中行点击事件
    $('#equipmentInfo tbody').unbind('click').on( 'click', 'tr', function () {
    	handleTableClick(this);
    });
	//绑定选中表格行后的删除事件
    $("#deleteSelectedEquipmentInfo").unbind('click').click(function(){
    	handleDeleteSelectedEquipmentInfo();
    });
	//绑定选中表格行后的更新修改事件
	$("#modifySelectedEquipmentInfo").unbind('click').click(function(){
		var modifyModalUrl=$(this).attr("data-url");
		handleModifySelectedEquipmentInfo(modifyModalUrl);
	});
	//绑定新增设备信息事件
	$("#addSelectedEquipmentInfo").unbind('click').click(function(){
	    $("#infoModal").load($(this).attr("data-url"));
	});
}
//处理选中表格行点击事件
function handleTableClick(selectElement){
	var equipmentInfoTable = $('#equipmentInfo').DataTable();
    if ( $(selectElement).hasClass('selected') ) {
        $(selectElement).removeClass('selected');
    }
    else {
    	equipmentInfoTable.$('tr.selected').removeClass('selected');
        $(selectElement).addClass('selected');
    }
}
//处理选中表格行后的更新事件
function handleModifySelectedEquipmentInfo(modifyModalUrl){
	var selectItems=fnGetSelected($('#equipmentInfo').DataTable());
	if(selectItems.length==1){
		var pendingTreatment=selectItems[0].equipmentIdHide;
		modifyModalUrl+="?equipmentInfoId="+pendingTreatment;
		$("#infoModal").load(modifyModalUrl);
	}
	
}
//处理选中表格行后的删除事件
function handleDeleteSelectedEquipmentInfo(){
	var selectItems=fnGetSelected($('#equipmentInfo').DataTable());
	if(selectItems.length==1){
		var pendingTreatment=selectItems[0].equipmentIdHide;
	}
	if(selectItems.length>1){
		//只可以选择一行数据
	}
	if(selectItems.length==0){
		//没有选择
	}
}
//得到选中的行中的数据
function fnGetSelected(oTable) {
    var aReturn = new Array();
    var aTrs = oTable.rows('.selected').data();
    for (var i = 0; i < aTrs.length; i++) {
       aReturn.push(aTrs[i]);
    }
    return aReturn;
}

function bindingEvent(){
	 $('.gotoPageUrlBefore').unbind('click').on( 'click',function () {
	     selectBssOrg(this);
	 });
}
function buttonSelectBssOrg(bssOrgSelectId){
	var button_BssOrgId=$(bssOrgSelectId).attr("button_bssOrgId");
	layer.close(layerOfBssOrgSelect);
	gotoTargetPage(button_BssOrgId);
}
function selectBssOrg(bssOrgSelectId){
	gotoPageUrl=$(bssOrgSelectId).attr("goto_page_url");
	stationLocation=eval(sessionStorage.getItem("stationLocation"));
	var html=sessionStorage.getItem("bssOrgSelectDivHtml");
	if(stationLocation==null){
		$("#bssOrgClick").html(html);
	}else{
		describe();
	}
	var lengthOfStationLocation=stationLocation.length;
	if(lengthOfStationLocation==1){
		var bssOrgId=stationLocation[0].bssOrgId;
		gotoTargetPage(bssOrgId);
	}
	if(lengthOfStationLocation>1){
		openBssOrgSelectWindow("请选择场站");
	}
	
}

function gotoTargetPage(bssOrgId){
	window.location.href=gotoPageUrl+"?bssOrgId="+bssOrgId;
}
function openBssOrgSelectWindow(loadWindowTitle){
	layerOfBssOrgSelect=layer.open({
       type: 1,
       //skin: 'layui-layer-lan',
       title: loadWindowTitle,
       fix: false,
       shadeClose: true,
       maxmin: true,
       area: ['1000px', '600px'],
       content: $('#bssOrgClick')
   });
}
function describe(){ 
	$.ajax({
		type: "GET",
		url: "${contextPath}/analysisadmin/analysis/station/stationLocationInformationDisplay.html",
		data: {},
		dataType: "json",
		success: function(data){
			stationLocation=data.stationLocationBean;
			//遍历构造结果集
			var htmlOfBssOrgSelect="";
			$.each(data.stationLocationBean, function(i, item) {
				var bssOrgId =item.bssOrgId;
				var latitude =item.latitude;
				var longitude =item.longitude;
				var bssOrgName=item.bssOrgName;
				var streetOfLocation=item.streetOfLocation;
				htmlOfBssOrgSelect+='<div class="panel panel-info">'
	                 +'<div class="panel-heading">'
	                 +'<h3 class="panel-title">'+bssOrgName
	                 +'</h3></div><div class="panel-body">' 
	                 +'<button class="btn btn-success btn-lg bssOrgSelectButton" button_bssOrgId="'+bssOrgId+'">点击选择</button>'
	                 +bssOrgName+'位于'+streetOfLocation+bssOrgId+'</div></div>';
			});
			$("#bssOrgClick").html(htmlOfBssOrgSelect);
			 $('.bssOrgSelectButton').unbind('click').on( 'click',function () {
				 buttonSelectBssOrg(this);
			 });
		}
	});
}
</script>
</body>
</html>
  
